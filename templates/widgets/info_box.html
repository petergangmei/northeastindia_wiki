{% comment %}
Wikipedia-style info box widget for articles about places, states, people, etc.
Usage: {% include 'widgets/info_box.html' with title="Nagaland" type="state" data=info_data %}
{% endcomment %}

<div class="info-box card border shadow-sm" style="width: 100%; max-width: 350px; margin-left: 0; margin-right: 0;">
    <!-- Info box header -->
    <div class="card-header bg-light border-bottom p-3">
        <h5 class="mb-0 fw-bold text-center">{{ title|default:"Information" }}</h5>
        {% if subtitle %}
        <p class="text-muted text-center mb-0 small">{{ subtitle }}</p>
        {% endif %}
    </div>

    <!-- Info box image -->
    {% if image %}
    <div class="text-center py-2 bg-light">
        <img src="{{ image }}" alt="{{ title }}" class="img-fluid rounded" style="max-height: 200px; object-fit: cover;">
    </div>
    {% endif %}

    <!-- Info box content -->
    <div class="card-body p-0">
        <table class="table table-sm mb-0" style="font-size: 0.9rem;">
            <!-- Display user-defined info box data (from JSON field) -->
            {% if json_data %}
                {% for key, value in json_data.items %}
                <tr>
                    <td class="fw-semibold text-muted bg-light px-3 py-2" style="width: 40%;">{{ key }}</td>
                    <td class="px-3 py-2">{{ value }}</td>
                </tr>
                {% endfor %}
            {% endif %}

            <!-- Coordinates if available -->
            {% if coordinates %}
            <tr>
                <td class="fw-semibold text-muted bg-light px-3 py-2">Coordinates</td>
                <td class="px-3 py-2">
                    <small>
                        <a href="https://www.google.com/maps?q={{ coordinates.lat }},{{ coordinates.lng }}" 
                           target="_blank" class="text-decoration-none">
                            {{ coordinates.display }}
                        </a>
                    </small>
                </td>
            </tr>
            {% endif %}
        </table>
    </div>

    <!-- Footer with source attribution -->
    <div class="card-footer bg-light text-center py-2">
        <small class="text-muted">
            <i class="fas fa-info-circle me-1"></i>
            Information as of {{ updated_date|date:"Y"|default:"2024" }}
        </small>
    </div>
</div>

<style>
.info-box {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    font-size: 14px;
    line-height: 1.4;
}

.info-box .table td {
    border-top: 1px solid #dee2e6;
    vertical-align: top;
}

.info-box .table tr:first-child td {
    border-top: none;
}

.info-box .table td:first-child {
    border-right: 1px solid #dee2e6;
}

@media (max-width: 768px) {
    .info-box {
        max-width: 100%;
        margin-bottom: 1rem;
    }
}
</style>