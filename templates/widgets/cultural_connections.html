{% load static %}
{% load schema_tags %}
<!-- Cultural Connections Widget -->
{% if cultural_articles %}
<div class="card border-0 shadow-sm mb-4">
    <div class="card-header bg-gradient bg-warning text-dark d-flex align-items-center">
        <i class="fas fa-palette me-2"></i>
        <h5 class="mb-0">Cultural Connections</h5>
    </div>
    <div class="card-body">
        <div class="row row-cols-1 g-3">
            {% for article in cultural_articles %}
            {% detect_content_type article as content_type %}
            <div class="col">
                <div class="card border-0 bg-light h-100">
                    <div class="card-body p-3">
                        <a href="{% url 'app:article-detail' slug=article.slug %}" class="text-decoration-none">
                            <div class="d-flex align-items-start">
                                <div class="flex-shrink-0 me-3">
                                    {% if content_type == 'Event' %}
                                    <div class="bg-warning text-dark rounded-circle d-flex align-items-center justify-content-center" 
                                         style="width: 40px; height: 40px;">
                                        <i class="fas fa-calendar-alt"></i>
                                    </div>
                                    {% elif content_type == 'Cultural' %}
                                    <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" 
                                         style="width: 40px; height: 40px;">
                                        <i class="fas fa-palette"></i>
                                    </div>
                                    {% else %}
                                    <div class="bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" 
                                         style="width: 40px; height: 40px;">
                                        <i class="fas fa-book"></i>
                                    </div>
                                    {% endif %}
                                </div>
                                <div class="flex-grow-1">
                                    <h6 class="text-dark mb-1 fw-bold">{{ article.title|truncatechars:40 }}</h6>
                                    <p class="text-muted small mb-2">{{ article.excerpt|truncatechars:80 }}</p>
                                    <div class="d-flex align-items-center">
                                        <span class="badge bg-warning text-dark me-2">{{ content_type }}</span>
                                        {% if article.states.exists %}
                                        <span class="badge bg-info text-white">{{ article.states.first.name }}</span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Explore More Link -->
        <div class="text-center mt-3 pt-3 border-top">
            <a href="{% url 'app:article-search' %}?q=culture+tradition+festival" class="btn btn-outline-warning btn-sm">
                <i class="fas fa-search me-1"></i>
                Explore cultural heritage
            </a>
        </div>
    </div>
</div>
{% endif %}